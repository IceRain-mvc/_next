(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1109],{31109:function(e,t,n){"use strict";n.r(t);var s=n(31059),r=n(74048),a=n(64713),i=n(94055),c=n(97538),l=n(51024),d=n(65400),o=n(40037),u=n(11187),p=n(30266),x=n(809),f=n.n(x),h=n(67294),m=n(3642),_=n.n(m),g=n(55355),j=n(40717),v=n(26706),C=n(25035),w=n(99611),N=n(48689),y=n(41417),I=n(5152),T=n(69719),b=n(85893),S=(0,I.default)((function(){return Promise.all([n.e(4749),n.e(5844)]).then(n.bind(n,48474))}),{ssr:!1,loadableGenerated:{webpack:function(){return[48474]},modules:["../src/components/Createcrew/Createcrews/index.tsx -> @/components/Createcrew/Tabres"]}}),k=(0,I.default)((function(){return Promise.all([n.e(5061),n.e(4947)]).then(n.bind(n,55061))}),{ssr:!1,loadableGenerated:{webpack:function(){return[55061]},modules:["../src/components/Createcrew/Createcrews/index.tsx -> @component/TreeType/TreeType"]}}),M=(0,I.default)((function(){return Promise.resolve().then(n.bind(n,92625))}),{ssr:!1,loadableGenerated:{webpack:function(){return[92625]},modules:["../src/components/Createcrew/Createcrews/index.tsx -> @/components/alertCommon/alertCommon"]}}),Z=(0,I.default)((function(){return Promise.all([n.e(4885),n.e(4321),n.e(3e3)]).then(n.bind(n,18035))}),{ssr:!1,loadableGenerated:{webpack:function(){return[18035]},modules:["../src/components/Createcrew/Createcrews/index.tsx -> ../Dialog"]}});t.default=function(e){var t=e.set,n=e.setTreeFlag,x=e.treeFlag,m=e.createdExamIns,I=e.createdExamineeMsg,E=e.createdOpenSign,B=e.createdPartWay,A=e.createdExamPassword,P=e.createdTreeId,W=e.createdTreeTitle,R=e.students,D=e.setNames,F=e.names,H=e.exercisePattern,K=(0,h.useState)([]),L=K[0],U=K[1],V=(0,h.useState)(I&&I.length>0?I:[{titleName:"\u59d3\u540d",format:[{value:"text",name:"\u6587\u672c"},{value:"select",name:"\u9009\u62e9\u6846"},{value:"date",name:"\u65e5\u671f"},{value:"phone",name:"\u624b\u673a\u53f7\u7801"},{value:"emain",name:"\u90ae\u7bb1"},{value:"identity",name:"\u8eab\u4efd\u8bc1"},{value:"integer",name:"\u6574\u6570"},{value:"decimals",name:"\u5c0f\u6570"}],formatRequire:"\u6587\u672c",mandatory:1,optionsValue:""}]),z=V[0],G=V[1],O=(0,h.useRef)(null),X=(0,h.useState)(m||""),Y=X[0],q=X[1],J=(0,h.useState)(B||2),Q=J[0],$=J[1],ee=(0,h.useState)(A||""),te=ee[0],ne=ee[1],se=(0,h.useState)(E),re=se[0],ae=se[1],ie=(0,h.useState)(R||[]),ce=ie[0],le=ie[1],de=(0,h.useState)([]),oe=de[0],ue=de[1],pe=(0,h.useState)([]),xe=pe[0],fe=pe[1],he=(0,h.useState)(!1),me=he[0],_e=he[1],ge=(0,h.useState)(!1),je=ge[0],ve=ge[1],Ce=(0,h.useState)(null),we=Ce[0],Ne=Ce[1],ye=function(){var e=(0,p.Z)(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==H&&!H){e.next=6;break}return e.next=3,(0,y.kM)();case 3:t=e.sent,e.next=9;break;case 6:return e.next=8,(0,y.Dm)();case 8:t=e.sent;case 9:U(t);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ie=(0,h.useState)(!1),Te=Ie[0],be=Ie[1],Se=(0,h.useState)(),ke=Se[0],Me=Se[1],Ze=(0,h.useState)(!1),Ee=Ze[0],Be=Ze[1],Ae=function(e){""===F?u.default.error("\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a  \u8bf7\u586b\u5199\u540d\u79f0").then():$(e)},Pe=(0,h.useState)([{icon:(0,b.jsx)(g.Z,{}),title:"\u6307\u5b9a\u8003\u751f"},{icon:(0,b.jsx)(j.Z,{}),title:"\u6307\u5b9a\u9636\u6bb5"},{icon:(0,b.jsx)(v.Z,{}),title:"\u6279\u91cf\u5f55\u5165"}])[0],We=(0,b.jsx)("span",{style:{color:"black",fontSize:10},children:"\u5f53\u8003\u8bd5\u8f83\u591a\u65f6,\u53ef\u4ee5\u5c06\u8003\u8bd5\u5f52\u7c7b,\u4fbf\u4e8e\u67e5\u627e\u548c\u7ba1\u7406"}),Re=(0,b.jsx)("span",{style:{color:"black",fontSize:10},children:"\u63d0\u9192\u8003\u751f\u6ce8\u610f\u4e8b\u9879\u65f6,\u8bf7\u5728\u8fd9\u91cc\u5907\u6ce8,\u8003\u751f\u5728\u8003\u8bd5\u6216\u7ec3\u4e60\u524d\u53ef\u4ee5\u770b\u5230\u8fd9\u4e9b\u4fe1\u606f"}),De=(0,h.useState)(W||0===H||H?"\u7ec3\u4e60\u5206\u7c7b":"\u8003\u8bd5\u5206\u7c7b"),Fe=De[0],He=De[1],Ke=(0,h.useState)(P||1),Le=Ke[0],Ue=Ke[1],Ve=(0,h.useState)([]),ze=Ve[0],Ge=Ve[1],Oe=(0,h.useState)(0),Xe=Oe[0],Ye=Oe[1],qe=(0,h.useState)(0),Je=qe[0],Qe=qe[1],$e=(0,h.useState)(0),et=$e[0],tt=$e[1],nt=function(e){40===e.keyCode&&console.log()},st=function(e,t,n){Ne(we=0),document.onkeydown=function(e){if(40===e.keyCode&&e.shiftKey){if(t!==ce.length-1)if(n.includes(ce[t].departId)&&t+1<ce.length&&n.includes(ce[t+1].departId)||n.includes(ce[t].id)&&t+1<ce.length&&n.includes(ce[t+1].id)){n=ce[t].departId?n.filter((function(e){return e!==ce[t].departId})):n.filter((function(e){return e!==ce[t].id}));var s=we+1;Ne(s),t+=s,fe((0,o.Z)(n))}else{var r=we+1;Ne(r),ce[t+=r].departId&&n.push(ce[t].departId),ce[t].id&&n.push(ce[t].id),fe((0,o.Z)(n))}22*(t+1)>O.current.offsetHeight&&O.current.scrollTo({top:22*(t-(Math.floor(O.current.offsetHeight/22)-1))})}if(38===e.keyCode&&e.shiftKey){if(0!==t)if(n.includes(ce[t].departId)&&n.includes(ce[t-1].departId)||n.includes(ce[t].id)&&n.includes(ce[t-1].id)){n=ce[t].departId?n.filter((function(e){return e!==ce[t].departId})):n.filter((function(e){return e!==ce[t].id}));var a=we-1;Ne(a),t+=a,fe((0,o.Z)(n))}else{var i=we-1;Ne(i),ce[t+=i].departId&&n.push(ce[t].departId),ce[t].id&&n.push(ce[t].id),fe((0,o.Z)(n))}22*t<O.current.scrollHeight-O.current.offsetHeight&&O.current.scrollTo({top:22*t})}}};(0,h.useEffect)((function(){document.addEventListener("keydown",nt),ye().then(),t(0===H||H?{exercisePattern:H,exerciseTitle:F,exerciseInstructions:Y,openSignature:re,joinWay:Q,treeId:Le,exercisePassword:te,exerciseineeFillMessage:z,exerciseineesAndDepartments:ce}:{examTitle:F,examInstructions:Y,openSignature:re,joinWay:Q,treeId:Le,examPassword:te,examineeFillMessage:z,examineesAndDepartments:ce})}),[F,Y,re,Q,te,z,Le,ce]),(0,h.useEffect)((function(){var e=[];ce.forEach((function(t){t.departId&&e.push(t.departId)})),ue([].concat(e))}),[]),(0,h.useEffect)((function(){A||function(){for(var e="",t=0;t<6;t++)e+=Math.floor(10*Math.random()).toString();ne(e)}()}),[]);var rt=(0,h.useState)(!1),at=rt[0],it=rt[1],ct=function(e,t){if(me){var n=e.currentTarget.getBoundingClientRect().top-e.currentTarget.parentElement.getBoundingClientRect().top;if(Xe<Je){if((n<Xe||n>=Je-5)&&xe.includes(t.id)){var s=xe.filter((function(e){return e!==t.id}));fe((0,o.Z)(s))}}else if((n>Xe||n+5<Je)&&xe.includes(t.id)){var r=xe.filter((function(e){return e!==t.id}));fe((0,o.Z)(r))}}},lt=function(e,t){var n=e.currentTarget.getBoundingClientRect().top-et;me&&!xe.includes(t.id)&&(Je-Xe>=0?n>Xe&&n<Je&&(xe.push(t.id),fe((0,o.Z)(xe))):n<Xe&&n+22>Je&&(xe.push(t.id),fe((0,o.Z)(xe))))};return(0,b.jsxs)("div",{className:_().box,children:[(0,b.jsx)(M,{alertStatus:Ee,enableDrag:!0,alertTitle:"\u624b\u5de5\u7b7e\u540d\u6548\u679c\u4f53\u9a8c",changeAlertFlag:function(){Be(!1)},children:(0,b.jsx)("div",{className:_().Cendra,children:(0,b.jsxs)("div",{className:_().Signs,children:[(0,b.jsx)("p",{className:_().Titles,children:"\u8981\u6c42\u4eb2\u624b\u7b7e\u540d\uff0c\u8bf7\u5728\u7a7a\u767d\u5904\u7b7e\u4e0a\u4f60\u7684\u59d3\u540d"}),(0,b.jsx)("div",{className:_().soid}),(0,b.jsxs)("div",{className:_().Enter,children:[(0,b.jsx)(d.default,{className:_().btn,onClick:function(){Be(!1)},children:"\u5b8c\u6210\u4eb2\u81ea\u5e76\u8fdb\u5165\u8003\u8bd5"}),(0,b.jsx)(d.default,{className:_().btn,onClick:function(){Be(!1)},children:"\u6e05\u7a7a\u91cd\u7b7e"})]})]})})}),je&&(0,b.jsx)("div",{className:_().pushp,children:(0,b.jsx)(Z,{visible:Te,conner:function(){be(!1)},newIndex:ke,setUserListArr:Ge,userListArr:ze,examinees:ce,setExaminees:le,setExamineeAlert:ve,setExistPartId:ue,existPartId:oe})}),(0,b.jsxs)("div",{className:_().tops,children:[(0,b.jsx)("p",{className:_().p,children:(0,b.jsx)("b",{className:_().pact,children:"\u57fa\u672c\u4fe1\u606f"})}),(0,b.jsx)("div",{className:_().valName,children:(0,b.jsx)("div",{className:_().User,children:(0,b.jsxs)(c.Z,{labelAlign:"left",name:"basic",labelCol:{span:6},wrapperCol:{span:18},initialValues:{username:F,introduction:Y},children:[(0,b.jsx)(c.Z.Item,{label:(0,b.jsx)("span",{children:0===H||H?"\u7ec3\u4e60\u540d\u79f0":"\u8003\u8bd5\u540d\u79f0"}),name:"username",rules:[{required:!0,message:"\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"}],colon:!1,children:(0,b.jsx)(l.default,{value:F,onChange:function(e){D(e.target.value)}})}),(0,b.jsxs)(c.Z.Item,{colon:!1,label:(0,b.jsxs)("span",{className:_().examType,children:[0===H||H?"\u7ec3\u4e60\u7c7b\u578b":"\u8003\u8bd5\u7c7b\u578b",(0,b.jsx)(i.default,{color:"white",placement:"right",title:We,children:(0,b.jsx)("span",{className:_().examTypeIcon,children:(0,b.jsx)(C.Z,{})})})]}),labelAlign:"left",rules:[{required:!0}],children:[(0,b.jsxs)("div",{className:_().examTypeSelect,onClick:function(){n(!x)},children:[Fe,(0,b.jsx)("button",{className:_().examTypeBtn,onClick:function(){n(!x)},children:"\u9009\u62e9"})]}),x?(0,b.jsx)("div",{className:_().treeShow,children:(0,b.jsx)(k,{type:0===H||H?"practice":"exam",getCurrentAndAncestorsTitles:function(e,t){He(e),Ue(t)},currentId:P})}):null]}),(0,b.jsx)(c.Z.Item,{colon:!1,name:"introduction",label:(0,b.jsxs)("span",{children:[(0,b.jsxs)("span",{children:["\xa0\xa0",0===H||H?"\u7ec3\u4e60\u987b\u77e5":"\u8003\u8bd5\u987b\u77e5"]}),(0,b.jsxs)(i.default,{color:"white",placement:"right",title:Re,children:["\xa0",(0,b.jsx)(C.Z,{style:{fontSize:11,lineHeight:10}})]})]}),children:(0,b.jsx)(l.default.TextArea,{onChange:function(e){q(e.target.value)},rows:5,cols:89})})]})})})]}),(0,b.jsxs)("div",{className:_().lawr,children:[(0,b.jsx)("p",{children:(0,b.jsx)("b",{children:"\u53c2\u52a0\u65b9\u5f0f"})}),(0,b.jsxs)("div",{className:_().ckbox,children:[(0,b.jsx)("span",{className:_().Way,children:"\u8003\u751f\u53c2\u52a0\u65b9\u5f0f"}),(0,b.jsx)("div",{className:_().rights,children:L&&L.map((function(e,t){return(0,b.jsx)("div",{children:(0,b.jsx)(a.default.Group,{onChange:function(){Ae(e.partId)},value:Q,children:(0,b.jsx)(r.default,{direction:"vertical",className:_().list,children:(0,b.jsxs)(a.default,{value:e.partId,checked:Q===e.partId,children:[(0,b.jsxs)("b",{className:_().tit,children:[e.partTitle,":"]}),(0,b.jsx)("span",{children:e.partDescription}),Q===e.partId&&(0,b.jsxs)("span",{style:{marginLeft:"4px",color:"blue",cursor:"pointer"},children:[(0,b.jsx)(w.Z,{}),"\u67e5\u770b\u6548\u679c"]})]})})})},t)}))})]}),Q&&1===Q||3===Q?(0,b.jsx)("div",{className:_().aaa,children:(0,b.jsxs)("div",{className:_().Messages,children:[(0,b.jsx)("span",{className:_().Way,children:"\u8bbe\u7f6e\u8003\u751f\u586b\u5199\u4fe1\u606f"}),(0,b.jsx)("div",{className:_().rights,children:(0,b.jsx)(S,{setFields:G,fields:z})})]})}):"",Q&&2===Q||3===Q?(0,b.jsxs)("div",{className:_().Mand,children:[(0,b.jsx)("span",{className:_().Way,children:"\u8003\u751f\u53e3\u4ee4"}),(0,b.jsx)("div",{className:_().rights,children:(0,b.jsx)(l.default,{placeholder:"\u8003\u751f\u987b\u8f93\u5165\u53e3\u4ee4\u624d\u80fd\u53c2\u52a0\u8003\u8bd5",maxLength:6,value:te,onChange:function(e){ne(e.target.value)}})})]}):"",4===Q&&(0,b.jsxs)("div",{className:_().signa,children:[(0,b.jsx)("span",{className:_().Way,children:"\u8003\u751f\u5b89\u6392"}),(0,b.jsxs)("div",{className:_().rights,children:[(0,b.jsx)("ul",{className:_().list,children:Pe.map((function(e,t){return(0,b.jsxs)("li",{onClick:function(){return Me(t),be(!0),void ve(!0)},children:[e.icon," ",e.title," "]},t)}))}),(0,b.jsxs)("p",{className:_().deletes,onClick:function(){var e=ce.filter((function(e){return e.id?!xe.includes(e.id):e.departId?!xe.includes(e.departId):void 0})),t=oe.filter((function(e){return!xe.includes(e)}));fe([]),ue((0,o.Z)(t)),le((0,o.Z)(e))},children:[(0,b.jsx)(N.Z,{}),"\u5220\u9664",""]}),(0,b.jsx)("span",{className:_().heitSpan,children:"\u88ab\u5b89\u6392\u7684\u8003\u751f\u4e5f\u53ef\u767b\u5f55\u8003\u751f\u4e2d\u5fc3\u67e5\u770b"}),(0,b.jsx)("div",{className:_().Text,children:(0,b.jsx)("ul",{ref:O,onMouseDown:function(e){tt(e.currentTarget.getBoundingClientRect().top),_e(!0)},onMouseMove:function(e){if(Qe(e.clientY-e.currentTarget.getBoundingClientRect().top),me){var t=ce.length-Math.floor(160/22);Je>Xe?e.clientY>=e.currentTarget.getBoundingClientRect().top+138&&(O.current.scrollTo({top:22*t,behavior:"smooth"}),ce.forEach((function(e,t){t>=Math.floor(160/22)-1&&(xe.push(e.id),fe((0,o.Z)(xe)))}))):e.clientY<=e.currentTarget.getBoundingClientRect().top+22&&(O.current.scrollTo({top:0,behavior:"smooth"}),ce.forEach((function(e,t){t<=ce.length-Math.floor(160/22)&&(xe.push(e.id),fe((0,o.Z)(xe)))})))}},onMouseUp:function(){_e(!1)},children:ce&&ce.map((function(e,t){return e.id?(0,b.jsxs)("li",{className:xe.includes(e.id)?_().selectNode:"",onMouseDown:function(n){!function(e,t,n){if(t.ctrlKey||t.shiftKey)if(xe.includes(n.id)){var s=xe.filter((function(e){return e!==n.id}));fe((0,o.Z)(s))}else fe([].concat((0,o.Z)(xe),[n.id]));else fe([n.id]),st(n.id,e,[n.id]);var r=t.currentTarget.getBoundingClientRect().top-t.currentTarget.parentElement.getBoundingClientRect().top;Ye(r),_e(!0)}(t,n,e)},onMouseLeave:function(t){ct(t,e)},onMouseMove:function(t){lt(t,e)},children:[(0,b.jsx)("span",{children:e.studentName}),(0,b.jsxs)("span",{children:["(",e.studentNumber,")"]})]},e.id):e.departId?(0,b.jsx)("li",{className:xe.includes(e.departId)?_().selectNode:"",onMouseDown:function(n){!function(e,t,n){if(e.ctrlKey||e.shiftKey)if(xe.includes(t.departId)){var s=xe.filter((function(e){return e!==t.departId}));fe((0,o.Z)(s))}else fe([].concat((0,o.Z)(xe),[t.departId]));else fe([t.departId]),st(t.departId,n,[t.departId]);var r=e.currentTarget.getBoundingClientRect().top-e.currentTarget.parentElement.getBoundingClientRect().top;Ye(r),_e(!0)}(n,e,t)},onMouseLeave:function(t){ct(t,e)},onMouseMove:function(t){lt(t,e)},children:(0,b.jsx)("span",{children:e.title})},e.departId):void 0}))})})]})]}),(0,b.jsxs)("div",{className:_().createText,children:[(0,b.jsx)("span",{className:_().Way,children:"\u8003\u751f\u624b\u5199\u7b7e\u540d"}),(0,b.jsxs)("div",{className:_().rights,children:[(0,b.jsx)(s.default,{onChange:function(e){var t=Number(e.target.checked);ae(t)},checked:1===re,style:{cursor:"auto"},children:"\u8003\u751f\u5fc5\u987b\u4eb2\u624b\u7b7e\u540d\u624d\u53ef\u4ee5\u53c2\u52a0\u8003\u8bd5"}),(0,b.jsxs)("span",{className:_().exad,onClick:function(){Be(!0)},style:{cursor:"pointer"},children:[(0,b.jsx)(w.Z,{}),"\u67e5\u770b\u6548\u679c"]})]})]})]}),at&&(0,b.jsx)(T.default,{warning:"\u786e\u5b9a\u5220\u9664\u5417\uff1f",setShowWarnAlert:it,isDelete:!0,executeFun:function(){var e=ce.filter((function(e){return e.id?!xe.includes(e.id):!e.departId||!xe.includes(e.departId)}));fe([]),le((0,o.Z)(e))}})]})}},3642:function(e){e.exports={box:"Createcrews_box__8nEXO",Cendra:"Createcrews_Cendra__FWirN",Signs:"Createcrews_Signs__ABHjv",Titles:"Createcrews_Titles__9HjPz",soid:"Createcrews_soid__wTItB",Enter:"Createcrews_Enter__BvJHB",btn:"Createcrews_btn__h2kKb",tops:"Createcrews_tops__Wyxvg",p:"Createcrews_p__B2dEl",valName:"Createcrews_valName__1AMYP",User:"Createcrews_User__3p8Kt",examType:"Createcrews_examType__FFw3e",asterisk:"Createcrews_asterisk__JerVN",examTypeIcon:"Createcrews_examTypeIcon__oiLYD",examTypeSelect:"Createcrews_examTypeSelect__9SX_w",examTypeBtn:"Createcrews_examTypeBtn__EH4k8",treeShow:"Createcrews_treeShow__uyHjt",examNotice:"Createcrews_examNotice___pW5V",examNoticeIcon:"Createcrews_examNoticeIcon__1NskA",classify:"Createcrews_classify__dttzy",lawr:"Createcrews_lawr__OoPaW",ckbox:"Createcrews_ckbox__1AyJ3",Way:"Createcrews_Way___0hiN",rights:"Createcrews_rights__I3QAy",list:"Createcrews_list__RwVLw",tit:"Createcrews_tit__B0y7g",aaa:"Createcrews_aaa__1KMFK",Messages:"Createcrews_Messages__0pXIU",exad:"Createcrews_exad__BJ3OK",cont:"Createcrews_cont__U3OaB",bnv:"Createcrews_bnv__3GM5X",yexdsh:"Createcrews_yexdsh__92pph",Mand:"Createcrews_Mand__7Vpg5",signa:"Createcrews_signa__2akzs",deletes:"Createcrews_deletes__pZVPT",Text:"Createcrews_Text__HQEXq",selectNode:"Createcrews_selectNode__ul_cU",createText:"Createcrews_createText__OcwPy",heitSpan:"Createcrews_heitSpan__WNIof"}}}]);