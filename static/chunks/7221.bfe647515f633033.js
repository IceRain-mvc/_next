(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7221],{77221:function(t,s,e){"use strict";e.r(s);var a=e(30266),u=e(809),n=e.n(u),r=e(67294),d=e(10037),o=e.n(d),c=e(5152),i=e(55355),_=e(88360),l=e(20345),y=e(8751),f=e(97937),S=e(63606),m=e(8598),h=e(31215),p=e(20290),w=e(85893),x=(0,c.default)((function(){return Promise.all([e.e(4885),e.e(2599),e.e(3524),e.e(4849),e.e(1033),e.e(1169),e.e(5400),e.e(1024),e.e(4055),e.e(8571),e.e(4749),e.e(4321),e.e(7412),e.e(2386),e.e(9843),e.e(23),e.e(862),e.e(3801),e.e(2759)]).then(e.bind(e,41166))}),{loadableGenerated:{webpack:function(){return[41166]},modules:["course/stats/studyStats/index.tsx -> ../statsModule"]}});s.default=function(){var t=(0,r.useState)((0,h.V)().user)[0],s=(0,r.useState)({stats_should:0,stats_already:0,stats_complete:0}),e=s[0],u=s[1],d=(0,r.useState)(0),c=d[0],b=d[1],g=function(){var s=(0,a.Z)(n().mark((function s(){var e,a;return n().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,p.UX)({courseId:t.token});case 2:return e=s.sent,b(e.courseChoose.length),s.next=6,(0,m.aC)({courseId:t.token,period:t.period});case 6:a=s.sent,u(a[0]);case 8:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}}();(0,r.useEffect)((function(){g()}),[]);var v=(0,r.useState)([]),A=v[0],q=v[1];return(0,r.useEffect)((function(){var s=[{title:"\u5df2\u53c2\u52a0\u4eba\u6570",num:e.stats_already,icon:"icon"},{title:"\u5b8c\u6210\u8bfe\u7a0b\u4eba\u6570",num:e.stats_complete,icon:"icon"},{title:"\u672a\u5b8c\u6210\u8bfe\u7a0b\u4eba\u6570",num:c-e.stats_complete,icon:"icon"},{title:"\u8bfe\u7a0b\u901a\u8fc7\u7387",num:(e.stats_complete/(e.stats_already?e.stats_already:1)*100).toFixed(2)+"%",icon:"icon"}];2===t.fieldCommand&&(s.splice(0,0,{title:"\u5e94\u53c2\u52a0\u4eba\u6570",num:c,icon:"icon"}),s.splice(2,0,{title:"\u7f3a\u8003\u4eba\u6570",num:c-e.stats_already,icon:"icon"})),2===t.completeCondition&&(s.splice(2===t.fieldCommand?3:1,0,{title:"\u672a\u901a\u8fc7\u8003\u8bd5\u4eba\u6570",num:e.stats_should-e.stats_already,icon:"icon"}),s.splice(2===t.fieldCommand?3:1,0,{title:"\u901a\u8fc7\u8003\u8bd5\u4eba\u6570",num:e.stats_should-e.stats_already,icon:"icon"})),q(s)}),[e]),(0,w.jsxs)("div",{className:o().studystatsbox,children:[(0,w.jsx)("div",{className:o().studywstatsview,children:A&&A.map((function(t,s){return(0,w.jsxs)("div",{className:o().studystatsheader,children:[(0,w.jsx)("p",{className:o().studystatstitle,children:t.title}),(0,w.jsx)("p",{className:o().studystatsnum,children:t.num}),(0,w.jsxs)("p",{className:o().studystatsicon,children:[0===s&&(0,w.jsx)(i.Z,{className:o().studyiconattend}),1===s&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(_.Z,{className:o().studyicon})," "+(e.stats_already/(e.stats_should?e.stats_should:1)*100).toFixed(2)+"%"]}),2===s&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(l.Z,{className:o().studyiconlack})," "+((e.stats_should-e.stats_already)/(e.stats_should?e.stats_should:1)*100).toFixed(2)+"%"]}),3===s&&(0,w.jsx)(y.Z,{className:o().studyiconperform}),4===s&&(0,w.jsx)(f.Z,{className:o().studyiconunfinished}),5===s&&(0,w.jsx)(y.Z,{className:o().studyiconperform}),6===s&&(0,w.jsx)(f.Z,{className:o().studyiconunfinished}),7===s&&(0,w.jsx)(S.Z,{className:o().studyiconpassing})]})]},s)}))}),(0,w.jsx)(x,{value:void 0})]})}},20290:function(t,s,e){"use strict";e.d(s,{XM:function(){return u},P6:function(){return n},S_:function(){return r},JN:function(){return d},X0:function(){return o},vt:function(){return c},De:function(){return i},GB:function(){return _},UX:function(){return l},JD:function(){return y}});var a=e(42828);function u(){return a.A.request({url:"courseLearnWay/getAll",method:"GET"})}function n(t){return a.A.request({url:"/course",method:"POST",data:t})}function r(t){return a.A.request({url:"/course-learn-free",method:"POST",data:t})}function d(t){return a.A.request({url:"/course-learn-choose",method:"POST",data:t})}function o(t){return a.A.request({url:"/course/compileCourse",method:"PUT",data:t})}function c(t){return a.A.request({url:"/course-learn-free",method:"PUT",data:t})}function i(t){return a.A.request({url:"/course-learn-choose",method:"PUT",data:t})}function _(t){return a.A.request({url:"/course/getBatchStudent",method:"GET",params:t})}function l(t){return a.A.request({url:"/course/getCourseItem",method:"GET",params:t})}function y(t){return a.A.request({url:"/course/getStudentItem",method:"GET",params:t})}},8598:function(t,s,e){"use strict";e.d(s,{fy:function(){return u},W0:function(){return n},av:function(){return r},M0:function(){return d},aC:function(){return o}});var a=e(42828);function u(t){return a.A.request({url:"course-stats/getStats",method:"GET",params:t})}function n(t){return a.A.request({url:"course-stats/getAbsent",method:"GET",params:t})}function r(t){return a.A.request({url:"course-stats/getStatsAll",method:"GET",params:t})}function d(t){return a.A.request({url:"course-stats/getExportAbsent",method:"GET",params:t})}function o(t){return a.A.request({url:"course-stats/getStatistics",method:"GET",params:t})}},31215:function(t,s,e){"use strict";e.d(s,{V:function(){return n}});var a=e(67294),u=e(65918),n=function(){return(0,a.useContext)(u.q)}},42828:function(t,s,e){"use strict";e.d(s,{A:function(){return o}});var a=e(11187),u=e(9669),n=e.n(u),r=e(11163),d=["login","register"],o=n().create({baseURL:"http://110.40.139.133:4001/api/v1",timeout:1e5});o.interceptors.request.use((function(t){var s=window.localStorage.getItem("token");return s&&(t.headers.Authorization="Bearer ".concat(s)),t}),(function(){throw new Error("\u53d1\u8d77\u8bf7\u6c42\u51fa\u9519")})),o.interceptors.response.use((function(t){if(t.status&&200===t.status&&"error"===t.data.status)return a.default.error({message:t.data.msg}),null;var s=t.data;return s.success?s.data:(a.default.error(s.msg),null)}),(function(t){if(t&&t.response&&t.response.status){switch(t.response.status){case 504:case 404:a.default.error("\u670d\u52a1\u5668\u5f02\u5e38");break;case 403:a.default.warn("\u8bbf\u5ba2\u65e0\u6743\u8fdb\u884c\u8be5\u64cd\u4f5c");break;case 401:a.default.info("\u8bf7\u91cd\u65b0\u767b\u5f55"),function(){var t=r.default.pathname,s=r.default.asPath;d.some((function(s){return t.includes(s)}))||(d.some((function(t){return s.includes(t)}))?r.default.push("/login"):r.default.push("/login?redirect=".concat(s)))}();break;case 422:a.default.info("\u4e0a\u4f20\u6210\u529f");break;case 500:a.default.info("\u670d\u52a1\u5668\u5185\u90e8\u51fa\u9519");break;default:a.default.error(t.response&&t.response.data&&t.response.data.msg||"\u672a\u77e5\u9519\u8bef!")}}return Promise.reject(t)}))},10037:function(t){t.exports={studystatsbox:"StudyStats_studystatsbox__tP8kG",studywstatsview:"StudyStats_studywstatsview__sycHd",studystatsheader:"StudyStats_studystatsheader__ScSrq",studystatstitle:"StudyStats_studystatstitle__sLTdC",studystatsnum:"StudyStats_studystatsnum__Z_NYu",studyiconattend:"StudyStats_studyiconattend__676HU",studyicon:"StudyStats_studyicon__es_GO",studyiconlack:"StudyStats_studyiconlack__0JVmN",studyiconperform:"StudyStats_studyiconperform__y6Qy4",studyiconunfinished:"StudyStats_studyiconunfinished__99u68",studyiconpassing:"StudyStats_studyiconpassing__bolyq",studyhandlereload:"StudyStats_studyhandlereload__xJgEe",studyiconrefresh:"StudyStats_studyiconrefresh__bUnPg",studystatsfun:"StudyStats_studystatsfun__5bD9a",commentfun:"StudyStats_commentfun__E_WOw",studystatsbut:"StudyStats_studystatsbut__UZ9H4",studystatstype:"StudyStats_studystatstype__YKND8",studystatstypecolor:"StudyStats_studystatstypecolor___eehI",studystatssearch:"StudyStats_studystatssearch__WUp3t",studystatsdate:"StudyStats_studystatsdate__Z2MuS",search:"StudyStats_search__WLiVC",shadow:"StudyStats_shadow__F4mbm",studystatsday:"StudyStats_studystatsday__j_ujQ",studystatsselect:"StudyStats_studystatsselect__dWbqT",studystatsexport:"StudyStats_studystatsexport__XQyin",studyiconderive:"StudyStats_studyiconderive__xDnw6",studygrade:"StudyStats_studygrade__x_qpt",studystatstable:"StudyStats_studystatstable__2uPpT",studystatspages:"StudyStats_studystatspages__AjD0b",statsexpandedrow:"StudyStats_statsexpandedrow__P_d1Q","ant-table-tbody":"StudyStats_ant-table-tbody__kC8_Q",commenttitle:"StudyStats_commenttitle__rIr_3",answertitle:"StudyStats_answertitle__Y13_L",answerbox:"StudyStats_answerbox__z6b_T",answerleft:"StudyStats_answerleft__W4A_x",answerright:"StudyStats_answerright__cCHW_",answertable:"StudyStats_answertable__VMMc4",answercolor:"StudyStats_answercolor__S1JuJ",answersearch:"StudyStats_answersearch__6dkse",answerinput:"StudyStats_answerinput__qz8aa",answersearchdata:"StudyStats_answersearchdata__ghIVK"}}}]);