(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4075],{50888:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var a=t(1413),i=t(67294),r={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},s=t(13401),c=function(e,n){return i.createElement(s.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:n,icon:r}))};c.displayName="LoadingOutlined";var o=i.forwardRef(c)},19382:function(e,n,t){"use strict";t.r(n);var a=t(89552),i=t(51024),r=t(92809),s=t(11187),c=t(30266),o=t(809),l=t.n(o),d=t(5152),u=t(67294),p=t(20625),f=t.n(p),m=t(91321),h=t(50888),_=t(12978),v=t(85893);function j(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}var x=(0,d.default)((function(){return t.e(1748).then(t.bind(t,41748))}),{loadableGenerated:{webpack:function(){return[41748]},modules:["../src/components/uploads/uploadVideo/uploadVideo.tsx -> @/components/markdown/redactMark"]}});n.default=function(e){var n=e.obtainData,t=e.chapterItem,o=e.AudioStop,d=e.clearContents,p=(0,u.useState)(t?t.serialContent:""),g=p[0],y=(p[1],(0,u.useRef)(null)),b=(0,u.useRef)(null),N=(0,u.useState)(!1),w=N[0],k=N[1],S=(0,u.useState)("none"),C=S[0],V=S[1],O=(0,u.useState)("none"),E=O[0],P=O[1],M=(0,u.useState)("none"),T=M[0],D=M[1],L=(0,u.useState)(!1),R=L[0],Z=L[1],B=(0,u.useState)("icon-jia"),A=B[0],z=B[1],F=(0,u.useState)((0,v.jsx)("p",{children:"\u8bf7\u9009\u62e9\u89c6\u9891\u6587\u4ef6"})),q=F[0],I=F[1],G=(0,u.useState)((0,v.jsx)("p",{children:"(\u652f\u6301mp4\u3001mp3\u3001oga\u89c6\u9891\u683c\u5f0f)"})),K=G[0],U=G[1],Y=(0,u.useState)(t?t.serialName:""),H=Y[0],X=Y[1],J=(0,u.useState)(t?String(t.serialTime):"60"),Q=J[0],W=J[1],$=(0,u.useState)(""),ee=$[0],ne=$[1],te=(0,u.useState)(t?t.fileAddressMp4.slice(t.fileAddressMp4.lastIndexOf(".")):""),ae=te[0],ie=te[1],re=(0,u.useState)(t?t.fileName:""),se=re[0],ce=re[1],oe=(0,u.useState)(t?t.fileAddressMp4:""),le=oe[0],de=oe[1],ue=(0,u.useRef)(null),pe=(0,u.useRef)(null),fe=(0,u.useRef)(null),me=(0,u.useState)("00:00"),he=me[0],_e=me[1],ve=(0,u.useState)("00:00"),je=ve[0],xe=ve[1],ge=(0,u.useState)(!1),ye=ge[0],be=ge[1],Ne=(0,u.useState)("none"),we=Ne[0],ke=Ne[1],Se=(0,u.useState)(!1),Ce=Se[0],Ve=Se[1],Oe=(0,m.Z)({scriptUrl:"//at.alicdn.com/t/font_2992472_6nj24f81zbp.js"}),Ee=function(){var e=(0,c.Z)(l().mark((function e(n){var t,a,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.target.files[0]){e.next=3;break}return e.abrupt("return");case 3:if(!(t.size>10485760)){e.next=6;break}return s.default.warning("\u8bfe\u7a0b\u4f53\u9a8c\u8bd5\u7528\uff0c\u5355\u4e2a\u6587\u4ef6\u4e0d\u80fd\u8d85\u8fc710M"),e.abrupt("return");case 6:if(t.type.includes("mp4")||t.type.includes("mp3")||t.type.includes("x-m4a")||t.type.includes("mpeg")||t.type.includes("oga")){e.next=9;break}return s.default.warning("\u8bf7\u4e0a\u4f20mp4\u3001mp3\u3001oga\u3001mpeg\u3001m4a\u683c\u5f0f\u6587\u4ef6"),e.abrupt("return");case 9:return V("block"),k(!0),e.next=13,(0,_.R)(t.name,t);case 13:a=e.sent,V("none"),!1===ye&&z(""),be(!0),I((0,v.jsx)("p",{children:t.name})),U((0,v.jsxs)("p",{children:[(0,v.jsx)(Oe,{type:"icon-chenggong"}),"\u4e0a\u4f20\u6210\u529f"]})),Z(!0),ce(t.name),de(a[1].uploadUrl),ie(t.type),t.type.includes("mp4")?D("block"):P("block"),t.type.includes("mp4")||(s.default.success("\u4e0a\u4f20\u6210\u529f,\u6b63\u5728\u52a0\u8f7d\u97f3\u9891"),i=ue.current.getBoundingClientRect().left-208,pe.current.style.width=i+"px");case 25:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){var e=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?j(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},t);return e.serialName=H,/^\d+$/.test(Q)?e.serialTime=Number(Q):e.serialTime=0,e.fileName=se,e.fileAddressMp4=le,e.serialContent=ee,n(e),function(){}}),[H,Q,ee,se,le]),(0,u.useEffect)((function(){if(t&&t.fileName&&t.fileAddressMp4){k(!0),Z(!0);var e=t.fileName.split(".");"mp4"===e[e.length-1]?D("block"):(P("block"),I((0,v.jsx)("p",{children:t.fileName})),z("icon-shipin"),U((0,v.jsxs)("p",{children:[(0,v.jsx)(Oe,{type:"icon-chenggong"}),"\u4e0a\u4f20\u6210\u529f"]})),ke("block"))}}),[]);(0,u.useEffect)((function(){""===ae||ae.includes("mp4")?""!==ae&&ae.includes("mp4")&&P("none"):(!1===ye&&(z(""),be(!0),ke("none")),_e("00:00"),fe.current.ontimeupdate=function(){var e=(Math.floor(fe.current.currentTime/60)+"").padStart(2,"0")+":"+(Math.floor(fe.current.currentTime%60)+"").padStart(2,"0");xe(e),pe.current.style.width=fe.current.currentTime/fe.current.duration*100+"%",fe.current.currentTime/fe.current.duration*101===101&&z("icon-shipin")},fe.current.oncanplay=function(){var e=(Math.floor(fe.current.duration/60)+"").padStart(2,"0")+":"+(Math.floor(fe.current.duration%60)+"").padStart(2,"0");_e(e)},function(){var e=fe.current;e.addEventListener("timeupdate",(function(){})),e.addEventListener("canplay",(function(){!1===Ce?(s.default.success("\u97f3\u9891\u5df2\u52a0\u8f7d\u5b8c\u6bd5"),z("icon-shipin"),ke("block"),be(!1)):z("icon-bg-suspend")})),e.addEventListener("progress",(function(){})),e.addEventListener("waiting",(function(){})),e.addEventListener("playing",(function(){})),e.addEventListener("pause",(function(){}))}())}),[ae]);return(0,u.useEffect)((function(){!0===o&&""!==le&&de("")}),[o,le]),(0,u.useEffect)((function(){d&&(X(""),W("60"),Ve(!1),pe.current.style.width="0%",z("icon-jia"),I((0,v.jsx)("p",{children:"\u8bf7\u9009\u62e9\u89c6\u9891\u6587\u4ef6"})),U((0,v.jsx)("p",{children:"(\u652f\u6301mp4\u3001mp3\u3001oga\u89c6\u9891\u683c\u5f0f)"})),Z(!1),ce(""),de(""),k(!1),P("none"),D("none"),ie(""),ke("none"),be(!1))}),[d]),(0,u.useEffect)((function(){return function(){Ve(!1)}}),[]),(0,v.jsxs)("div",{className:f().articleContent,children:[(0,v.jsxs)("div",{className:f().chapter,children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{children:"*"})," \u6587\u7ae0\u540d\u79f0"]}),(0,v.jsx)("div",{className:f().chapterName,children:(0,v.jsx)(i.default,{placeholder:"\u8bf7\u8f93\u5165\u7ae0\u8282\u540d\u79f0...",value:H,onChange:function(e){X(e.target.value)}})})]}),(0,v.jsxs)("div",{className:f().chapter,children:[(0,v.jsx)("div",{children:"\u7ae0\u8282\u5b66\u65f6"}),(0,v.jsx)("div",{className:f().chapterTime,children:(0,v.jsx)(i.default,{defaultValue:60,value:Q,onChange:function(e){W(e.target.value)}})}),(0,v.jsx)("div",{className:f().unit,children:"\u5206\u949f"})]}),(0,v.jsxs)("div",{className:f().article,children:[(0,v.jsx)("div",{className:f().Center,children:"\u6587\u4ef6\u4e0a\u4f20"}),(0,v.jsxs)("div",{className:f().markdownDocument,onClick:function(){y.current.click()},children:[R?(0,v.jsx)("div",{className:f().cancel,onClick:function(e){Ve(!1),pe.current.style.width="0%",s.default.success("\u5df2\u53d6\u6d88"),e||e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0,z("icon-jia"),I((0,v.jsx)("p",{children:"\u8bf7\u9009\u62e9\u89c6\u9891\u6587\u4ef6"})),U((0,v.jsx)("p",{children:"(\u652f\u6301mp4\u3001mp3\u3001oga\u89c6\u9891\u683c\u5f0f)"})),Z(!1),ce(""),de(""),k(!1),P("none"),D("none"),ie(""),ke("none"),be(!1)},children:"x"}):null,(0,v.jsxs)("div",{className:f().addFile,children:[!0===ye?(0,v.jsx)(h.Z,{style:{fontSize:"50px"}}):null,(0,v.jsx)(Oe,{style:{fontSize:"45px"},type:A,onClick:function(){"icon-shipin"===A?(fe.current.play(),z("icon-bg-suspend")):"icon-bg-suspend"===A&&(fe.current.pause(),z("icon-shipin"))}})]}),q,K,(0,v.jsxs)("div",{className:f().mask,ref:b,style:{display:"".concat(C)},children:[(0,v.jsx)("div",{className:f().addFile,children:(0,v.jsx)(a.default,{size:"large"})}),(0,v.jsx)("p",{className:f().uploadP,children:"\u6b63\u5728\u4e0a\u4f20..."})]}),(0,v.jsxs)("div",{className:f().player,style:{display:"".concat(E)},children:[(0,v.jsxs)("div",{className:f().outer,ref:ue,onMouseDown:function(e){return function(e){e||e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0;var n=ue.current.offsetWidth,t=e.clientX-ue.current.getBoundingClientRect().left;t>n||t<0||(pe.current.style.width=t+"px",fe.current.currentTime=t/n*fe.current.duration,Ve(!0))}(e)},style:{display:"".concat(we)},children:[(0,v.jsx)("div",{className:f().inner,ref:pe,children:(0,v.jsx)("div",{className:f().innerBtn})}),(0,v.jsxs)("div",{className:f().fileLength,children:[(0,v.jsx)("p",{children:je}),(0,v.jsx)("p",{children:he})]})]}),(0,v.jsx)("audio",{ref:fe,src:le,controls:!0,style:{display:"none"},children:"\u4f60\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u97f3\u9891\u64ad\u653e\u54e6\uff01"})]}),(0,v.jsx)("div",{className:f().videoPlayer,style:{display:"".concat(T)},children:(0,v.jsx)("video",{src:le,controls:!0,children:"\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301 video \u6807\u7b7e\u3002"})})]})]}),(0,v.jsxs)("div",{className:f().videoContent,children:[(0,v.jsx)("div",{className:f().Center,children:"\u89c6\u9891\u7b80\u4ecb"}),(0,v.jsx)("div",{className:f().videoMarkdown,children:(0,v.jsx)(x,{getContent:function(e){ne(e)},tacitly:g,clearContent:d})})]}),(0,v.jsx)("input",{disabled:w,type:"file",accept:"audio/*,video/*",className:f().submit,ref:y,onChange:Ee})]})}},20625:function(e){e.exports={articleContent:"uploadVideo_articleContent__94Yjv",chapter:"uploadVideo_chapter__pJBs_",chapterName:"uploadVideo_chapterName__wb5gT",chapterTime:"uploadVideo_chapterTime__ISQDR",article:"uploadVideo_article__iPFXG",Center:"uploadVideo_Center__jGVo_",markdownDocument:"uploadVideo_markdownDocument__28He7",addFile:"uploadVideo_addFile__Z5qaD",player:"uploadVideo_player__9cVo9",outer:"uploadVideo_outer__A_1qK",inner:"uploadVideo_inner__nq1oV",innerBtn:"uploadVideo_innerBtn__2VYuT",fileLength:"uploadVideo_fileLength__3sjq2",videoPlayer:"uploadVideo_videoPlayer__1igbZ",videoContent:"uploadVideo_videoContent__dfxx2",videoMarkdown:"uploadVideo_videoMarkdown__ugHYU",submit:"uploadVideo_submit__6ED_I",mask:"uploadVideo_mask__cVaK4",uploadP:"uploadVideo_uploadP__OrCms",cancel:"uploadVideo_cancel__ME9Ki"}}}]);