(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9086],{69719:function(e,n,t){"use strict";t.r(n);var r=t(67294),a=t(1051),i=t.n(a),s=t(97937),o=t(25035),c=t(28058),u=t(85893);n.default=function(e){var n=e.warning,t=e.setShowWarnAlert,a=e.isDelete,l=e.executeFun,d=e.isExam,f=e.cancelEvent,p=(0,r.useState)(null),g=p[0],_=p[1],w=(0,r.useState)(null),h=w[0],m=w[1],x=(0,r.useState)(!1),v=x[0],j=x[1],b=(0,r.useState)(0),k=b[0],S=b[1],y=(0,r.useState)(0),C=y[0],A=y[1],N=(0,r.useRef)(null),W=(0,r.useCallback)((function(e){if(v){var n=e.clientX-k,t=e.clientY-C;_(n),m(t)}}),[k,C,v]),E=(0,r.useCallback)((function(){j(!1),g<0&&_(0),g>window.innerWidth-N.current.offsetWidth&&_(window.innerWidth-N.current.offsetWidth),h<0&&m(0),h>window.innerHeight-N.current.offsetHeight-155&&m(window.innerHeight-N.current.offsetHeight-155)}),[g,h]);return(0,r.useEffect)((function(){return window.addEventListener("mousemove",W),function(){window.removeEventListener("mousemove",W)}}),[W]),(0,u.jsx)("div",{className:i().warning_shadow,children:(0,u.jsxs)("div",{className:i().warning_window,style:{left:null!==g?g+"px":"calc(calc(100vw - 340px) / 2)",top:null!==h?h+"px":"calc(calc(100vh - 200px) / 2)"},children:[(0,u.jsxs)("div",{className:i().warning_title,ref:N,onMouseDown:function(e){j(!0),S(e.clientX-N.current.getBoundingClientRect().left),A(e.clientY-N.current.getBoundingClientRect().top)},onMouseUp:E,children:["\u63d0\u793a",(0,u.jsx)("span",{id:i().warning_close_icon,children:(0,u.jsx)(s.Z,{onClick:function(){t(!1),f&&f(!0)}})})]}),(0,u.jsx)("div",{className:i().warning_content,children:(0,u.jsxs)("p",{children:[(0,u.jsx)("span",{className:i().warning_remind,children:a?(0,u.jsx)(o.Z,{}):(0,u.jsx)(c.Z,{})}),(0,u.jsx)("span",{className:i().warning_warn,children:n})]})}),(0,u.jsxs)("div",{className:i().warning_foot,children:[(0,u.jsx)("button",{className:i().warning_btn,onClick:function(){t(!1),l&&l()},children:d?"\u53bb\u8bbe\u8ba1\u8bd5\u5377":"\u786e\u5b9a"}),(a||d)&&(0,u.jsx)("button",{className:i().warning_execute,onClick:function(){t(!1),f&&f(!0)},children:d?"\u7ee7\u7eed\u7f16\u8f91\u8003\u8bd5":"\u53d6\u6d88"})]})]})})}},75400:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return v}});var r=t(89552),a=t(30266),i=t(62443),s=t(809),o=t.n(s),c=t(5152),u=t(91321),l=t(77123),d=t(13558),f=t.n(d),p=t(67294),g=t(42828);function _(e){return g.A.request({url:"tree-person/managementClassify",method:"GET",params:e})}var w=t(55061),h=t(85893),m=(0,c.default)((function(){return t.e(4703).then(t.bind(t,94703))}),{loadableGenerated:{webpack:function(){return[94703]},modules:["../src/components/management/classifyContent/index.tsx -> @/components/commonTable/commonTable"]}}),x=(0,c.default)((function(){return Promise.all([t.e(4885),t.e(5400),t.e(1024),t.e(8571),t.e(4749),t.e(4321),t.e(7538),t.e(8117),t.e(1518),t.e(3167)]).then(t.bind(t,32327))}),{loadableGenerated:{webpack:function(){return[32327]},modules:["../src/components/management/classifyContent/index.tsx -> @/components/form/part/managementForm"]}}),v=function(){var e=(0,u.Z)({scriptUrl:"//at.alicdn.com/t/font_2981278_jqfipdnadnp.js"}),n=(0,p.useState)(),t=n[0],s=n[1],c=(0,p.useState)(!1),d=c[0],g=c[1],v=(0,p.useState)(1),j=v[0],b=v[1],k=(0,p.useState)({page:1,pageSize:10}),S=k[0],y=k[1],C=(0,p.useState)(1),A=C[0],N=C[1],W=(0,p.useState)([]),E=W[0],L=W[1],Z=(0,p.useState)(!1),B=Z[0],T=Z[1],z=(0,p.useState)(!1)[0],P=(0,p.useState)({"\u8003\u8bd5\u5206\u7c7b":"exam","\u7ec3\u4e60\u5206\u7c7b":"practice","\u8bfe\u7a0b\u5206\u7c7b":"course","\u8bd5\u9898\u5206\u7c7b":"question","\u6240\u5c5e\u9636\u6bb5":"department"})[0],H=(0,p.useState)("\u8003\u8bd5\u5206\u7c7b"),R=H[0],X=H[1],q=(0,h.jsx)(w.default,{type:R,getCurrentAndAncestorsTitles:function(e,n){console.log(e,n)}}),U=(0,h.jsx)("div",{className:f().classifyPop,children:q}),D=[{title:"\u5206\u7c7b\u5185\u5bb9",dataIndex:"title",width:"30%",ellipsis:!0},{title:"\u64cd\u4f5c",key:"id",width:"70%",ellipsis:!0,render:function(e,n){return(0,h.jsx)("div",{onClick:function(){!function(e){console.log(e),X(P[e.title])}(n)},children:(0,h.jsx)(i.default,{placement:"rightTop",content:U,trigger:"click",children:(0,h.jsx)("span",{style:{padding:"0 15px",cursor:"pointer"},children:(0,h.jsx)(l.Z,{})})})})}}],F=function(){var e=(0,a.Z)(o().mark((function e(n){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(!1),s(n.search),e.next=4,_({page:S.page,pageSize:S.pageSize,type:n.search});case 4:t=e.sent,T(!0),L(t.data),b(t.len);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),I=function(){var e=(0,a.Z)(o().mark((function e(n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(!1),y({page:n.current,pageSize:n.pageSize}),e.next=4,_({page:n.current,pageSize:n.pageSize,type:t});case 4:r=e.sent,T(!0),L(r.data),N(n.current);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Y=function(){var e=(0,a.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(!1),e.next=3,_({});case 3:n=e.sent,T(!0),L(n.data),b(n.len);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,p.useEffect)((function(){Y()}),[]),(0,h.jsxs)("div",{className:f().operationLogContentBox,children:[(0,h.jsxs)("div",{className:f().topBox,children:[(0,h.jsxs)("p",{children:[(0,h.jsx)(e,{type:"icon-fl-renminbi"}),(0,h.jsx)("span",{children:"\u5206\u7c7b"})]}),(0,h.jsxs)("button",{onClick:function(){g(!d)},children:[(0,h.jsx)(e,{type:"icon-arrow-down"}),"\u67e5\u8be2"]})]}),z&&(0,h.jsx)("div",{children:q}),d&&(0,h.jsx)(x,{labelName:["search"],title:["\u5173\u952e\u5b57\u68c0\u7d22"],keyData:["search"],onFinish:function(e){e?F(e):Y()}}),(0,h.jsx)("div",{className:f().table,children:(0,h.jsx)(m,{data:E,columns:D,dataCount:j,loading:!1,rowKeyId:"id",isCheckout:!1,onChangeTable:I,current:A})}),!B&&(0,h.jsx)("div",{className:f().classifyLoding,children:(0,h.jsx)(r.default,{})})]})}},42828:function(e,n,t){"use strict";t.d(n,{A:function(){return c}});var r=t(11187),a=t(9669),i=t.n(a),s=t(11163),o=["login","register"],c=i().create({baseURL:"http://110.40.139.133:4001/api/v1",timeout:1e5});c.interceptors.request.use((function(e){var n=window.localStorage.getItem("token");return n&&(e.headers.Authorization="Bearer ".concat(n)),e}),(function(){throw new Error("\u53d1\u8d77\u8bf7\u6c42\u51fa\u9519")})),c.interceptors.response.use((function(e){if(e.status&&200===e.status&&"error"===e.data.status)return r.default.error({message:e.data.msg}),null;var n=e.data;return n.success?n.data:(r.default.error(n.msg),null)}),(function(e){if(e&&e.response&&e.response.status){switch(e.response.status){case 504:case 404:r.default.error("\u670d\u52a1\u5668\u5f02\u5e38");break;case 403:r.default.warn("\u8bbf\u5ba2\u65e0\u6743\u8fdb\u884c\u8be5\u64cd\u4f5c");break;case 401:r.default.info("\u8bf7\u91cd\u65b0\u767b\u5f55"),function(){var e=s.default.pathname,n=s.default.asPath;o.some((function(n){return e.includes(n)}))||(o.some((function(e){return n.includes(e)}))?s.default.push("/login"):s.default.push("/login?redirect=".concat(n)))}();break;case 422:r.default.info("\u4e0a\u4f20\u6210\u529f");break;case 500:r.default.info("\u670d\u52a1\u5668\u5185\u90e8\u51fa\u9519");break;default:r.default.error(e.response&&e.response.data&&e.response.data.msg||"\u672a\u77e5\u9519\u8bef!")}}return Promise.reject(e)}))},1051:function(e){e.exports={warning_shadow:"AlertWarning_warning_shadow__YT0E0",warning_window:"AlertWarning_warning_window__PqAiF",warning_title:"AlertWarning_warning_title__Je8KR",warning_close_icon:"AlertWarning_warning_close_icon__H9Zlk",warning_content:"AlertWarning_warning_content__2sKUU",warning_warn:"AlertWarning_warning_warn__DXYI7",warning_remind:"AlertWarning_warning_remind__5_AO_",warning_foot:"AlertWarning_warning_foot__XX8y1",warning_execute:"AlertWarning_warning_execute__hZ0np"}},13558:function(e){e.exports={operationLogContentBox:"content_operationLogContentBox__LnixC",topBox:"content_topBox__QW2HX",table:"content_table__uOLcb",classifyPop:"content_classifyPop__m_T7R",classifyLoding:"content_classifyLoding__T4Axu"}}}]);