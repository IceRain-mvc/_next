(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2402,1154],{95965:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return y},default:function(){return S}});var r=n(89552),u=n(56697),s=n(30266),a=n(809),i=n.n(a),c=n(67294),o=n(89392),p=n(92150),f=n(6533),l=n(11163),x=n(94455),b=n(42828);function d(e){return b.A.request({url:"/exercise/setIsPublish/"+e,method:"PUT"})}var h=n(5152),m=n(57779),k=n(87107),g=n.n(k),w=n(69719),v=n(85893),N=(0,h.default)((function(){return n.e(3552).then(n.bind(n,43552))}),{ssr:!1,loadableGenerated:{webpack:function(){return[43552]},modules:["SimulationTest/index.tsx -> @/components/exam/previewText/index"]}}),y=!0,S=function(e){var t=e.paperId,n=e.type,a=e.exerciseId,b=e.isPublish,h=e.exercisePattern,k=(0,l.useRouter)(),y=(0,c.useState)(1),S=y[0],P=y[1],C=(0,c.useState)(!1),_=C[0],j=C[1],q=(0,c.useState)([]),I=q[0],T=q[1],E=(0,c.useState)(!1),Z=E[0],M=E[1],A=(0,c.useState)(!1),B=A[0],O=A[1],W=(0,c.useState)(0),G=W[0],R=W[1],X=(0,c.useState)(!1),F=X[0],H=X[1],L=(0,c.useState)(!1),Q=L[0],U=L[1],Y=function(){var e=(0,s.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.NY)({data:I});case 2:return t=e.sent,e.abrupt("return",{msg:t.msg,code:t.code});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=(0,c.useState)([{title:"\u8003\u8bd5\u4fe1\u606f",skip:!1,buttonMsg:{next:"\u4fdd\u5b58&\u53bb\u8bbe\u8ba1\u8bd5\u5377"}},{title:"\u8bbe\u8ba1\u8bd5\u5377",skip:!1,buttonMsg:{next:"\u5b8c\u6210\u8bbe\u8ba1&\u53bb\u53d1\u5e03\u8003\u8bd5",customButton:[{title:"\u8003\u8bd5\u8bbe\u7f6e",type:"danger",buttonCallback:function(){O(!0)}},{title:"\u9884\u89c8\u8bd5\u5377",buttonCallback:function(){console.log("\u67e5\u770b")}}],pre:"\u8fd4\u56de\u4e0a\u4e00\u6b65"}},{title:"\u53d1\u5e03\u8003\u8bd5",skip:!1,buttonMsg:{pre:"\u8fd4\u56de\u4e0a\u4e00\u6b65",finish:"\u8fd4\u56de\u8003\u8bd5\u5217\u8868"}}])[0],D=(0,c.useState)([{title:"\u8003\u8bd5\u4fe1\u606f",skip:!1,buttonMsg:{next:"\u4fdd\u5b58&\u53bb\u8bbe\u8ba1\u8bd5\u5377"}},{title:"\u8bbe\u8ba1\u8bd5\u5377",skip:!1,buttonMsg:{next:"\u5b8c\u6210\u8bbe\u8ba1&\u53bb\u53d1\u5e03\u8003\u8bd5",customButton:[{title:"\u9884\u89c8\u8bd5\u5377",buttonCallback:function(){var e=(0,s.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y();case 2:e.sent.code;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}],pre:"\u8fd4\u56de\u4e0a\u4e00\u6b65"}},{title:"\u53d1\u5e03\u8003\u8bd5",skip:!1,buttonMsg:{pre:"\u8fd4\u56de\u4e0a\u4e00\u6b65",finish:"\u8fd4\u56de\u8003\u8bd5\u5217\u8868"}}])[0],J=(0,c.useState)(!1),K=J[0],V=J[1],$=function(){var e=(0,s.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(a).then((function(e){j(!0),e&&(j(!1),k.push({pathname:"/code/TestCode",query:{exerciseId:a,paperId:Number(t),type:Number(n),isPublish:Number(b),exercisePattern:h}}))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=(0,s.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,x.me)(Number(t)).then(function(){var e=(0,s.Z)(i().mark((function e(r){var u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==r.questionCount||3===Number(n)){e.next=4;break}M(!0),e.next=25;break;case 4:if(0!==Number(n)){e.next=10;break}return e.next=7,Y();case 7:u=e.sent,e.next=24;break;case 10:e.t0=Number(n),e.next=1===e.t0?13:2===e.t0?17:3===e.t0?21:23;break;case 13:return e.next=15,(0,x.sR)(Number(t));case 15:return u=e.sent,e.abrupt("break",24);case 17:return e.next=19,(0,x.BG)(Number(t));case 19:return u=e.sent,e.abrupt("break",24);case 21:return u={code:1,msg:"\u521b\u5efa\u6210\u529f"},e.abrupt("break",24);case 23:return e.abrupt("break",24);case 24:1===u.code?0===Number(b)?O(!0):k.push({pathname:"/code/TestCode",query:{exerciseId:a,paperId:Number(t),type:Number(n),isPublish:b,exercisePattern:h}}):H(!0);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,v.jsx)("div",{className:g().example,children:(0,v.jsxs)(r.default,{wrapperClassName:g().loading,spinning:_,children:[(0,v.jsx)(o.default,{args:3}),(0,v.jsxs)(p.default,{callBack:function(){var e=(0,s.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t){e.next=7;break}return e.next=3,Y();case 3:if(1!==e.sent.code){e.next=7;break}return e.next=7,k.push({pathname:"/exercise/createExercise",query:{createdExerciseId:a,exercisePattern:h}});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),preCallback:(0,s.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(S-1),e.next=3,Y();case 3:if(1!==e.sent.code){e.next=8;break}if(1!==S){e.next=8;break}return e.next=8,k.push({pathname:"/exercise/createExercise",query:{createdExerciseId:a,exercisePattern:h}});case 8:case"end":return e.stop()}}),e)}))),nextCallback:(0,s.Z)(i().mark((function e(){var r,u,s,a,c,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2!==Number(n)){e.next=17;break}return r=[],u=[],e.next=5,(0,x.W3)(t);case 5:for(s=e.sent,a=s[0].paperBigQuestions,c=function(e){for(var t=a[e].questionSelectionStrategys,n=function(e){r.push(t[e]),u.some((function(n){return n.questionClassify===t[e].questionClassify&&n.questionType===t[e].questionType}))||u.push(t[e])},s=0;s<t.length;s++)n(s)},o=0;o<a.length;o++)c(o);if(!(r.length>u.length)){e.next=13;break}U(!0),e.next=15;break;case 13:return e.next=15,ee();case 15:e.next=19;break;case 17:return e.next=19,ee();case 19:case"end":return e.stop()}}),e)}))),step:1===Number(b)?z:D,minHeight:630,finishCallback:void 0,start:S,children:[0===S?"0":null,1===S&&(0,v.jsx)(f.default,{loading:_,setLoading:j,exerciseId:a,paperId:t,isPublish:b,type:Number(n),myChange:function(e){R(e)},quesSort:I,getPaperMessage:T})]}),(0,v.jsx)(m.default,{examid:a,closeAlert:function(){O(!1)},sourt:G,textPaper:function(e){V(e)},isPublish:Number(b),exercise:!0,updatePublish:$,Chapter:0===+h,alertShow:B,changeAlertFlag:function(e){O(e)}}),(0,v.jsx)(N,{preview:K,changePreview:function(e){V(e)},parderId:Number(t),judgement:""}),(0,v.jsx)(u.Z,{title:"\u63d0\u793a",visible:Z,onOk:function(){M(!1)},onCancel:function(){M(!1)},children:(0,v.jsx)("p",{children:"\u8bd5\u5377\u6ca1\u6709\u8bd5\u9898\uff0c\u8bf7\u8bbe\u8ba1\u8bd5\u5377\uff01"})}),Q&&(0,v.jsx)(w.default,{warning:"\u540c\u4e00\u5f20\u8bd5\u5377\u4e0d\u80fd\u9009\u62e9\u76f8\u540c\u7684\u7b56\u7565\uff01",setShowWarnAlert:U}),F&&(0,v.jsx)(w.default,{warning:"\u5b58\u5728\u91cd\u590d\u8bd5\u9898\uff0c\u8bf7\u6ce8\u610f\u9898\u578b\u7236\u5b50\u8282\u70b9\u5206\u7c7b\uff01",setShowWarnAlert:H})]})})}},43540:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/SimulationTest",function(){return n(95965)}])}},function(e){e.O(0,[9774,4885,2599,3524,4849,1033,1400,1169,5400,1024,4055,8571,4749,4321,7412,7538,2386,9709,9843,23,862,3663,6697,9194,1609,5293,5649,9392,7779,1244,2580,2888,179],(function(){return t=43540,e(e.s=t);var t}));var t=e.O();_N_E=t}]);