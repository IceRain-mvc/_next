(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6979,1154],{74415:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return v}});var r=n(89552),a=n(56697),u=n(30266),s=n(809),i=n.n(s),c=n(67294),o=n(92150),p=n(6533),f=n(89392),l=n(11163),d=n(57779),x=n(5152),b=n(87107),h=n.n(b),m=n(94455),k=n(69719),g=n(85893),w=(0,x.default)((function(){return n.e(3552).then(n.bind(n,43552))}),{ssr:!1,loadableGenerated:{webpack:function(){return[43552]},modules:["design/Design.tsx -> @/components/exam/previewText/index"]}}),v=!0;t.default=function(e){var t=e.isPublish,n=e.paperId,s=e.type,x=e.examId,b=(0,l.useRouter)(),v=(0,c.useState)(1),N=v[0],y=v[1],C=(0,c.useState)(!1),S=C[0],_=C[1],q=(0,c.useState)(!1),I=q[0],j=q[1],P=(0,c.useState)(!1),Z=P[0],M=P[1],E=(0,c.useState)([]),B=E[0],T=E[1],A=(0,c.useState)(!1),O=A[0],W=A[1],D=(0,c.useState)(!1),G=D[0],R=D[1],X=(0,c.useState)(0),F=X[0],H=X[1],L=function(){var e=(0,u.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.NY)({data:B});case 2:return t=e.sent,e.abrupt("return",{msg:t.msg,code:t.code});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){}),[b.query.examId,b.query.paperId,b.query.type,F]);var Q=(0,c.useState)([{title:"\u8003\u8bd5\u4fe1\u606f",skip:!1,buttonMsg:{next:"\u4fdd\u5b58&\u53bb\u8bbe\u8ba1\u8bd5\u5377"}},{title:"\u8bbe\u8ba1\u8bd5\u5377",skip:!1,buttonMsg:{next:"\u5b8c\u6210\u8bbe\u8ba1&\u53bb\u53d1\u5e03\u8003\u8bd5",customButton:[{title:"\u8003\u8bd5\u8bbe\u7f6e",type:"danger",buttonCallback:function(){_(!0)}},{title:"\u9884\u89c8\u8bd5\u5377",buttonCallback:function(){console.log("\u67e5\u770b")}}],pre:"\u8fd4\u56de\u4e0a\u4e00\u6b65"}},{title:"\u53d1\u5e03\u8003\u8bd5",skip:!1,buttonMsg:{pre:"\u8fd4\u56de\u4e0a\u4e00\u6b65",finish:"\u8fd4\u56de\u8003\u8bd5\u5217\u8868"}}])[0],V=(0,c.useState)([{title:"\u8003\u8bd5\u4fe1\u606f",skip:!1,buttonMsg:{next:"\u4fdd\u5b58&\u53bb\u8bbe\u8ba1\u8bd5\u5377"}},{title:"\u8bbe\u8ba1\u8bd5\u5377",skip:!1,buttonMsg:{next:"\u5b8c\u6210\u8bbe\u8ba1&\u53bb\u53d1\u5e03\u8003\u8bd5",customButton:[{title:"\u9884\u89c8\u8bd5\u5377",buttonCallback:function(){var e=(0,u.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:e.sent.code;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}],pre:"\u8fd4\u56de\u4e0a\u4e00\u6b65"}},{title:"\u53d1\u5e03\u8003\u8bd5",skip:!1,buttonMsg:{pre:"\u8fd4\u56de\u4e0a\u4e00\u6b65",finish:"\u8fd4\u56de\u8003\u8bd5\u5217\u8868"}}])[0],Y=(0,c.useState)(!1),z=Y[0],J=Y[1],K=function(){var e=(0,u.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.fV)(x).then((function(e){M(!0),e&&(M(!1),b.push({pathname:"/code/Code",query:{examId:x,paperId:Number(n),type:Number(s),isPublish:Number(t)}}))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=(0,u.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,m.me)(Number(n)).then(function(){var e=(0,u.Z)(i().mark((function e(r){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==r.questionCount){e.next=4;break}j(!0),e.next=24;break;case 4:if(0!==Number(s)){e.next=10;break}return e.next=7,L();case 7:a=e.sent,e.next=23;break;case 10:e.t0=Number(s),e.next=1===e.t0?13:2===e.t0?17:3===e.t0?21:22;break;case 13:return e.next=15,(0,m.sR)(Number(n));case 15:return a=e.sent,e.abrupt("break",23);case 17:return e.next=19,(0,m.BG)(Number(n));case 19:return a=e.sent,e.abrupt("break",23);case 21:case 22:return e.abrupt("break",23);case 23:1===a.code?0===Number(t)?_(!0):b.push({pathname:"/code/Code",query:{examId:x,paperId:Number(n),type:Number(s),isPublish:t}}):R(!0);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,g.jsx)("div",{className:h().example,children:(0,g.jsxs)(r.default,{wrapperClassName:h().loading,spinning:Z,children:[(0,g.jsxs)(f.default,{args:2,children:[(0,g.jsxs)(o.default,{callBack:function(){var e=(0,u.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t){e.next=7;break}return e.next=3,L();case 3:if(1!==e.sent.code){e.next=7;break}return e.next=7,b.push({pathname:"/exam/createCrew",query:{examId:x}});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),preCallback:(0,u.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(N-1),e.next=3,L();case 3:if(1!==e.sent.code){e.next=8;break}if(1!==N){e.next=8;break}return e.next=8,b.push({pathname:"/exam/createCrew",query:{examId:x}});case 8:case"end":return e.stop()}}),e)}))),nextCallback:(0,u.Z)(i().mark((function e(){var t,r,a,u,c,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2!==Number(s)){e.next=17;break}return t=[],r=[],e.next=5,(0,m.W3)(n);case 5:for(a=e.sent,u=a[0].paperBigQuestions,c=function(e){for(var n=u[e].questionSelectionStrategys,a=function(e){t.push(n[e]),r.some((function(t){return t.questionClassify===n[e].questionClassify&&t.questionType===n[e].questionType}))||r.push(n[e])},s=0;s<n.length;s++)a(s)},o=0;o<u.length;o++)c(o);if(!(t.length>r.length)){e.next=13;break}W(!0),e.next=15;break;case 13:return e.next=15,U();case 15:e.next=19;break;case 17:return e.next=19,U();case 19:case"end":return e.stop()}}),e)}))),step:1===Number(t)?Q:V,minHeight:630,finishCallback:void 0,start:N,children:[0===N?"0":null,1===N&&(0,g.jsx)(p.default,{type:Number(s),examId:x,paperId:Number(n),myChange:function(e){H(e)},setLoading:M,loading:Z,getPaperMessage:T,quesSort:B})]}),(0,g.jsx)(d.default,{examid:x,closeAlert:function(){_(!1)},sourt:F,textPaper:function(e){J(e)},isPublish:Number(t),updatePublish:K,Chapter:!1,alertShow:S,changeAlertFlag:function(e){_(e)}}),(0,g.jsx)(w,{preview:z,changePreview:function(e){J(e)},parderId:Number(n),judgement:""})]}),(0,g.jsx)(a.Z,{title:"\u63d0\u793a",visible:I,onOk:function(){j(!1)},onCancel:function(){j(!1)},children:(0,g.jsx)("p",{children:"\u8bd5\u5377\u6ca1\u6709\u8bd5\u9898\uff0c\u8bf7\u8bbe\u8ba1\u8bd5\u5377\uff01"})}),O&&(0,g.jsx)(k.default,{warning:"\u540c\u4e00\u5f20\u8bd5\u5377\u4e0d\u80fd\u9009\u62e9\u76f8\u540c\u7684\u7b56\u7565\uff01",setShowWarnAlert:W}),G&&(0,g.jsx)(k.default,{warning:"\u5b58\u5728\u91cd\u590d\u8bd5\u9898\uff0c\u8bf7\u6ce8\u610f\u9898\u578b\u7236\u5b50\u8282\u70b9\u5206\u7c7b\uff01",setShowWarnAlert:R})]})})}},98665:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/design/Design",function(){return n(74415)}])}},function(e){e.O(0,[9774,4885,2599,3524,4849,1033,1400,1169,5400,1024,4055,8571,4749,4321,7412,7538,2386,9709,9843,23,862,3663,6697,9194,1609,5293,5649,9392,7779,1244,2580,2888,179],(function(){return t=98665,e(e.s=t);var t}));var t=e.O();_N_E=t}]);