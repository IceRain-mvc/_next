(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2383,7221],{73579:function(t,e,s){"use strict";var r=s(61682);function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function a(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){r(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}e.default=function(t,e){var s=u.default,r={loading:function(t){t.error,t.isLoading;return t.pastDelay,null}};t instanceof Promise?r.loader=function(){return t}:"function"===typeof t?r.loader=t:"object"===typeof t&&(r=a(a({},r),t));var n=r=a(a({},r),e);if(n.suspense)throw new Error("Invalid suspense option usage in next/dynamic. Read more: https://nextjs.org/docs/messages/invalid-dynamic-suspense");if(n.suspense)return s(n);r.loadableGenerated&&delete(r=a(a({},r),r.loadableGenerated)).loadableGenerated;if("boolean"===typeof r.ssr){if(!r.ssr)return delete r.ssr,i(s,r);delete r.ssr}return s(r)};o(s(67294));var u=o(s(23668));function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){return delete e.webpack,delete e.modules,t(e)}},3982:function(t,e,s){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.LoadableContext=void 0;var n=((r=s(67294))&&r.__esModule?r:{default:r}).default.createContext(null);e.LoadableContext=n},23668:function(t,e,s){"use strict";var r=s(2553),n=s(62012),a=s(61682);function u(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?u(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function i(t,e){var s="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!s){if(Array.isArray(t)||(s=function(t,e){if(!t)return;if("string"===typeof t)return d(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);"Object"===s&&t.constructor&&(s=t.constructor.name);if("Map"===s||"Set"===s)return Array.from(t);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return d(t,e)}(t))||e&&t&&"number"===typeof t.length){s&&(t=s);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,o=!1;return{s:function(){s=s.call(t)},n:function(){var t=s.next();return u=t.done,t},e:function(t){o=!0,a=t},f:function(){try{u||null==s.return||s.return()}finally{if(o)throw a}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,r=new Array(e);s<e;s++)r[s]=t[s];return r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c,l=(c=s(67294))&&c.__esModule?c:{default:c},f=s(67161),_=s(3982);var y=[],p=[],m=!1;function h(t){var e=t(),s={loading:!0,loaded:null,error:null};return s.promise=e.then((function(t){return s.loading=!1,s.loaded=t,t})).catch((function(t){throw s.loading=!1,s.error=t,t})),s}var S=function(){function t(e,s){r(this,t),this._loadFn=e,this._opts=s,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}return n(t,[{key:"promise",value:function(){return this._res.promise}},{key:"retry",value:function(){var t=this;this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};var e=this._res,s=this._opts;e.loading&&("number"===typeof s.delay&&(0===s.delay?this._state.pastDelay=!0:this._delay=setTimeout((function(){t._update({pastDelay:!0})}),s.delay)),"number"===typeof s.timeout&&(this._timeout=setTimeout((function(){t._update({timedOut:!0})}),s.timeout))),this._res.promise.then((function(){t._update({}),t._clearTimeouts()})).catch((function(e){t._update({}),t._clearTimeouts()})),this._update({})}},{key:"_update",value:function(t){this._state=o(o({},this._state),{},{error:this._res.error,loaded:this._res.loaded,loading:this._res.loading},t),this._callbacks.forEach((function(t){return t()}))}},{key:"_clearTimeouts",value:function(){clearTimeout(this._delay),clearTimeout(this._timeout)}},{key:"getCurrentValue",value:function(){return this._state}},{key:"subscribe",value:function(t){var e=this;return this._callbacks.add(t),function(){e._callbacks.delete(t)}}}]),t}();function b(t){return function(t,e){var s=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null,suspense:!1},e);s.suspense&&(s.lazy=l.default.lazy(s.loader));var r=null;function n(){if(!r){var e=new S(t,s);r={getCurrentValue:e.getCurrentValue.bind(e),subscribe:e.subscribe.bind(e),retry:e.retry.bind(e),promise:e.promise.bind(e)}}return r.promise()}if(!m&&"function"===typeof s.webpack&&!s.suspense){var a=s.webpack();p.push((function(t){var e,s=i(a);try{for(s.s();!(e=s.n()).done;){var r=e.value;if(-1!==t.indexOf(r))return n()}}catch(u){s.e(u)}finally{s.f()}}))}var u=s.suspense?function(t,e){return l.default.createElement(s.lazy,o(o({},t),{},{ref:e}))}:function(t,e){n();var a=l.default.useContext(_.LoadableContext),u=f.useSubscription(r);return l.default.useImperativeHandle(e,(function(){return{retry:r.retry}}),[]),a&&Array.isArray(s.modules)&&s.modules.forEach((function(t){a(t)})),l.default.useMemo((function(){return u.loading||u.error?l.default.createElement(s.loading,{isLoading:u.loading,pastDelay:u.pastDelay,timedOut:u.timedOut,error:u.error,retry:r.retry}):u.loaded?l.default.createElement(function(t){return t&&t.__esModule?t.default:t}(u.loaded),t):null}),[t,u])};return u.preload=function(){return!s.suspense&&n()},u.displayName="LoadableComponent",l.default.forwardRef(u)}(h,t)}function v(t,e){for(var s=[];t.length;){var r=t.pop();s.push(r(e))}return Promise.all(s).then((function(){if(t.length)return v(t,e)}))}b.preloadAll=function(){return new Promise((function(t,e){v(y).then(t,e)}))},b.preloadReady=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((function(e){var s=function(){return m=!0,e()};v(p,t).then(s,s)}))},window.__NEXT_PRELOADREADY=b.preloadReady;var g=b;e.default=g},77221:function(t,e,s){"use strict";s.r(e);var r=s(30266),n=s(809),a=s.n(n),u=s(67294),o=s(10037),i=s.n(o),d=s(5152),c=s(55355),l=s(88360),f=s(20345),_=s(8751),y=s(97937),p=s(63606),m=s(8598),h=s(31215),S=s(20290),b=s(85893),v=(0,d.default)((function(){return Promise.all([s.e(4885),s.e(2599),s.e(3524),s.e(4849),s.e(1033),s.e(1169),s.e(5400),s.e(1024),s.e(4055),s.e(8571),s.e(4749),s.e(4321),s.e(7412),s.e(2386),s.e(9843),s.e(23),s.e(862),s.e(3801),s.e(2759)]).then(s.bind(s,41166))}),{loadableGenerated:{webpack:function(){return[41166]},modules:["course/stats/studyStats/index.tsx -> ../statsModule"]}});e.default=function(){var t=(0,u.useState)((0,h.V)().user)[0],e=(0,u.useState)({stats_should:0,stats_already:0,stats_complete:0}),s=e[0],n=e[1],o=(0,u.useState)(0),d=o[0],g=o[1],w=function(){var e=(0,r.Z)(a().mark((function e(){var s,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.UX)({courseId:t.token});case 2:return s=e.sent,g(s.courseChoose.length),e.next=6,(0,m.aC)({courseId:t.token,period:t.period});case 6:r=e.sent,n(r[0]);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){w()}),[]);var x=(0,u.useState)([]),O=x[0],j=x[1];return(0,u.useEffect)((function(){var e=[{title:"\u5df2\u53c2\u52a0\u4eba\u6570",num:s.stats_already,icon:"icon"},{title:"\u5b8c\u6210\u8bfe\u7a0b\u4eba\u6570",num:s.stats_complete,icon:"icon"},{title:"\u672a\u5b8c\u6210\u8bfe\u7a0b\u4eba\u6570",num:d-s.stats_complete,icon:"icon"},{title:"\u8bfe\u7a0b\u901a\u8fc7\u7387",num:(s.stats_complete/(s.stats_already?s.stats_already:1)*100).toFixed(2)+"%",icon:"icon"}];2===t.fieldCommand&&(e.splice(0,0,{title:"\u5e94\u53c2\u52a0\u4eba\u6570",num:d,icon:"icon"}),e.splice(2,0,{title:"\u7f3a\u8003\u4eba\u6570",num:d-s.stats_already,icon:"icon"})),2===t.completeCondition&&(e.splice(2===t.fieldCommand?3:1,0,{title:"\u672a\u901a\u8fc7\u8003\u8bd5\u4eba\u6570",num:s.stats_should-s.stats_already,icon:"icon"}),e.splice(2===t.fieldCommand?3:1,0,{title:"\u901a\u8fc7\u8003\u8bd5\u4eba\u6570",num:s.stats_should-s.stats_already,icon:"icon"})),j(e)}),[s]),(0,b.jsxs)("div",{className:i().studystatsbox,children:[(0,b.jsx)("div",{className:i().studywstatsview,children:O&&O.map((function(t,e){return(0,b.jsxs)("div",{className:i().studystatsheader,children:[(0,b.jsx)("p",{className:i().studystatstitle,children:t.title}),(0,b.jsx)("p",{className:i().studystatsnum,children:t.num}),(0,b.jsxs)("p",{className:i().studystatsicon,children:[0===e&&(0,b.jsx)(c.Z,{className:i().studyiconattend}),1===e&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.Z,{className:i().studyicon})," "+(s.stats_already/(s.stats_should?s.stats_should:1)*100).toFixed(2)+"%"]}),2===e&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Z,{className:i().studyiconlack})," "+((s.stats_should-s.stats_already)/(s.stats_should?s.stats_should:1)*100).toFixed(2)+"%"]}),3===e&&(0,b.jsx)(_.Z,{className:i().studyiconperform}),4===e&&(0,b.jsx)(y.Z,{className:i().studyiconunfinished}),5===e&&(0,b.jsx)(_.Z,{className:i().studyiconperform}),6===e&&(0,b.jsx)(y.Z,{className:i().studyiconunfinished}),7===e&&(0,b.jsx)(p.Z,{className:i().studyiconpassing})]})]},e)}))}),(0,b.jsx)(v,{value:void 0})]})}},20290:function(t,e,s){"use strict";s.d(e,{XM:function(){return n},P6:function(){return a},S_:function(){return u},JN:function(){return o},X0:function(){return i},vt:function(){return d},De:function(){return c},GB:function(){return l},UX:function(){return f},JD:function(){return _}});var r=s(42828);function n(){return r.A.request({url:"courseLearnWay/getAll",method:"GET"})}function a(t){return r.A.request({url:"/course",method:"POST",data:t})}function u(t){return r.A.request({url:"/course-learn-free",method:"POST",data:t})}function o(t){return r.A.request({url:"/course-learn-choose",method:"POST",data:t})}function i(t){return r.A.request({url:"/course/compileCourse",method:"PUT",data:t})}function d(t){return r.A.request({url:"/course-learn-free",method:"PUT",data:t})}function c(t){return r.A.request({url:"/course-learn-choose",method:"PUT",data:t})}function l(t){return r.A.request({url:"/course/getBatchStudent",method:"GET",params:t})}function f(t){return r.A.request({url:"/course/getCourseItem",method:"GET",params:t})}function _(t){return r.A.request({url:"/course/getStudentItem",method:"GET",params:t})}},8598:function(t,e,s){"use strict";s.d(e,{fy:function(){return n},W0:function(){return a},av:function(){return u},M0:function(){return o},aC:function(){return i}});var r=s(42828);function n(t){return r.A.request({url:"course-stats/getStats",method:"GET",params:t})}function a(t){return r.A.request({url:"course-stats/getAbsent",method:"GET",params:t})}function u(t){return r.A.request({url:"course-stats/getStatsAll",method:"GET",params:t})}function o(t){return r.A.request({url:"course-stats/getExportAbsent",method:"GET",params:t})}function i(t){return r.A.request({url:"course-stats/getStatistics",method:"GET",params:t})}},65918:function(t,e,s){"use strict";s.d(e,{q:function(){return r}});var r=s(67294).createContext({user:{},setUser:function(){return{}},collapsed:!1,toggleCollapse:function(){return{}}})},31215:function(t,e,s){"use strict";s.d(e,{V:function(){return a}});var r=s(67294),n=s(65918),a=function(){return(0,r.useContext)(n.q)}},42828:function(t,e,s){"use strict";s.d(e,{A:function(){return i}});var r=s(11187),n=s(9669),a=s.n(n),u=s(11163),o=["login","register"],i=a().create({baseURL:"http://110.40.139.133:4001/api/v1",timeout:1e5});i.interceptors.request.use((function(t){var e=window.localStorage.getItem("token");return e&&(t.headers.Authorization="Bearer ".concat(e)),t}),(function(){throw new Error("\u53d1\u8d77\u8bf7\u6c42\u51fa\u9519")})),i.interceptors.response.use((function(t){if(t.status&&200===t.status&&"error"===t.data.status)return r.default.error({message:t.data.msg}),null;var e=t.data;return e.success?e.data:(r.default.error(e.msg),null)}),(function(t){if(t&&t.response&&t.response.status){switch(t.response.status){case 504:case 404:r.default.error("\u670d\u52a1\u5668\u5f02\u5e38");break;case 403:r.default.warn("\u8bbf\u5ba2\u65e0\u6743\u8fdb\u884c\u8be5\u64cd\u4f5c");break;case 401:r.default.info("\u8bf7\u91cd\u65b0\u767b\u5f55"),function(){var t=u.default.pathname,e=u.default.asPath;o.some((function(e){return t.includes(e)}))||(o.some((function(t){return e.includes(t)}))?u.default.push("/login"):u.default.push("/login?redirect=".concat(e)))}();break;case 422:r.default.info("\u4e0a\u4f20\u6210\u529f");break;case 500:r.default.info("\u670d\u52a1\u5668\u5185\u90e8\u51fa\u9519");break;default:r.default.error(t.response&&t.response.data&&t.response.data.msg||"\u672a\u77e5\u9519\u8bef!")}}return Promise.reject(t)}))},71184:function(t,e,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/course/stats/studyStats",function(){return s(77221)}])},10037:function(t){t.exports={studystatsbox:"StudyStats_studystatsbox__tP8kG",studywstatsview:"StudyStats_studywstatsview__sycHd",studystatsheader:"StudyStats_studystatsheader__ScSrq",studystatstitle:"StudyStats_studystatstitle__sLTdC",studystatsnum:"StudyStats_studystatsnum__Z_NYu",studyiconattend:"StudyStats_studyiconattend__676HU",studyicon:"StudyStats_studyicon__es_GO",studyiconlack:"StudyStats_studyiconlack__0JVmN",studyiconperform:"StudyStats_studyiconperform__y6Qy4",studyiconunfinished:"StudyStats_studyiconunfinished__99u68",studyiconpassing:"StudyStats_studyiconpassing__bolyq",studyhandlereload:"StudyStats_studyhandlereload__xJgEe",studyiconrefresh:"StudyStats_studyiconrefresh__bUnPg",studystatsfun:"StudyStats_studystatsfun__5bD9a",commentfun:"StudyStats_commentfun__E_WOw",studystatsbut:"StudyStats_studystatsbut__UZ9H4",studystatstype:"StudyStats_studystatstype__YKND8",studystatstypecolor:"StudyStats_studystatstypecolor___eehI",studystatssearch:"StudyStats_studystatssearch__WUp3t",studystatsdate:"StudyStats_studystatsdate__Z2MuS",search:"StudyStats_search__WLiVC",shadow:"StudyStats_shadow__F4mbm",studystatsday:"StudyStats_studystatsday__j_ujQ",studystatsselect:"StudyStats_studystatsselect__dWbqT",studystatsexport:"StudyStats_studystatsexport__XQyin",studyiconderive:"StudyStats_studyiconderive__xDnw6",studygrade:"StudyStats_studygrade__x_qpt",studystatstable:"StudyStats_studystatstable__2uPpT",studystatspages:"StudyStats_studystatspages__AjD0b",statsexpandedrow:"StudyStats_statsexpandedrow__P_d1Q","ant-table-tbody":"StudyStats_ant-table-tbody__kC8_Q",commenttitle:"StudyStats_commenttitle__rIr_3",answertitle:"StudyStats_answertitle__Y13_L",answerbox:"StudyStats_answerbox__z6b_T",answerleft:"StudyStats_answerleft__W4A_x",answerright:"StudyStats_answerright__cCHW_",answertable:"StudyStats_answertable__VMMc4",answercolor:"StudyStats_answercolor__S1JuJ",answersearch:"StudyStats_answersearch__6dkse",answerinput:"StudyStats_answerinput__qz8aa",answersearchdata:"StudyStats_answersearchdata__ghIVK"}},5152:function(t,e,s){t.exports=s(73579)}},function(t){t.O(0,[9774,1400,7334,2888,179],(function(){return e=71184,t(t.s=e);var e}));var e=t.O();_N_E=e}]);