(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3094],{63094:function(e,n,t){"use strict";t.r(n);var a=t(89552),r=t(65400),s=t(51024),u=t(11187),l=t(30266),i=t(92809),o=t(97538),c=t(49711),d=t(64749),p=t(809),m=t.n(p),f=t(67294),h=t(22877),g=t(74075),x=t(97214),b=t.n(x),j=t(85893);function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function w(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var _=d.default.Option;n.default=function(e){var n=e.close,t=e.getChildAdminData,i=e.editId,p=e.setEditId,x=e.page,v=e.pageSize,O=o.Z.useForm(),Z=(0,c.Z)(O,1)[0],y=(0,f.useState)({email:"",name:"",password:"",phoneNum:"",status:"active"}),k=y[0],N=y[1],C=(0,f.useState)(!0),A=C[0],z=C[1],B=function(){var e=(0,l.Z)(m().mark((function e(){var a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null,!i){e.next=12;break}return delete k.password,e.next=5,(0,g.jA)(w({id:i},k));case 5:a=e.sent,u.default.success(a.msg),p(null),t({page:x,pageSize:v}),n(!1),e.next=16;break;case 12:return e.next=14,(0,g.$t)(k);case 14:"01"===(a=e.sent).code?(u.default.success("\u6dfb\u52a0\u6210\u529f\uff01"),t({page:x,pageSize:v}),n(!1)):"03"===a.code?u.default.error(a.msg):u.default.error("\u6b64\u7528\u6237\u5df2\u5b58\u5728\uff01");case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=(0,f.useCallback)(function(){var e=(0,l.Z)(m().mark((function e(n){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=9;break}return e.next=3,(0,g.mO)({id:n});case 3:t=e.sent,N({email:t.email,name:t.name,password:t.password,phoneNum:t.phoneNum,status:t.status}),Z.resetFields(),z(!1),e.next=10;break;case 9:z(!1);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[Z]);return(0,f.useEffect)((function(){E(i)}),[i,E]),(0,j.jsx)("div",{className:b().fromBox,children:(0,j.jsx)(a.default,{spinning:A,children:(0,j.jsxs)(o.Z,{name:"basic",labelCol:{span:6},form:Z,wrapperCol:{span:14},onFinish:B,onFinishFailed:function(){u.default.error("\u63d0\u4ea4\u5931\u8d25\uff01\u5b58\u5728\u683c\u5f0f\u9519\u8bef\u6216\u8005\u5b58\u5728\u672a\u586b\u9879")},initialValues:{email:k.email,name:k.name,status:k.status,phoneNum:k.phoneNum},children:[(0,j.jsx)(o.Z.Item,{label:"\u90ae\u7bb1",name:"email",validateTrigger:"onBlur",rules:[{required:!0,pattern:h.EQ,message:"\u90ae\u7bb1\u683c\u5f0f\u9519\u8bef\uff01"}],children:(0,j.jsx)(s.default,{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1\u53f7",onChange:function(e){N(w(w({},k),{},{email:e.target.value}))}})}),(0,j.jsx)(o.Z.Item,{label:"\u7528\u6237",name:"name",rules:[{required:!0,pattern:new RegExp(/^[A-Za-z0-9_\u4e00-\u9fa5]{3,12}$/),message:"\u7528\u6237\u540d\u5e94\u4e3a3-12\u4f4d\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u6c49\u5b57\uff01"}],validateTrigger:"onBlur",children:(0,j.jsx)(s.default,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",onChange:function(e){N(w(w({},k),{},{name:e.target.value}))}})}),i?null:(0,j.jsx)(o.Z.Item,{label:"\u5bc6\u7801",name:"password",rules:[{required:!0,pattern:/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$/,message:"\u5bc6\u7801\u683c\u5f0f\u9519\u8bef\uff018-16\u4f4d\u6570\u5b57\u3001\u5b57\u6bcd\u6df7\u5408"}],validateTrigger:"onBlur",children:(0,j.jsx)(s.default.Password,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",onChange:function(e){N(w(w({},k),{},{password:e.target.value}))}})}),(0,j.jsx)(o.Z.Item,{name:"status",label:"\u72b6\u6001",hasFeedback:!0,rules:[{required:!0,message:"\u672a\u9009\u62e9\u72b6\u6001\uff01"}],children:(0,j.jsxs)(d.default,{onChange:function(e){N(w(w({},k),{},{status:e}))},placeholder:"\u8bf7\u9009\u62e9\u72b6\u6001",children:[(0,j.jsx)(_,{value:"active",children:"\u6fc0\u6d3b"}),(0,j.jsx)(_,{value:"locked",children:"\u7981\u7528"})]})}),(0,j.jsx)(o.Z.Item,{label:"\u624b\u673a\u53f7",name:"phoneNum",rules:[{required:!1,pattern:h.m7,message:"\u8bf7\u8f93\u516511\u4f4d\u624b\u673a\u53f7\uff01"}],validateTrigger:"onBlur",children:(0,j.jsx)(s.default,{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",value:k.phoneNum,onChange:function(e){N(w(w({},k),{},{phoneNum:e.target.value}))}})}),(0,j.jsx)(o.Z.Item,{wrapperCol:{span:12,offset:6},children:(0,j.jsxs)("div",{className:b().btnBox,children:[(0,j.jsx)(r.default,{className:b().submit,type:"primary",htmlType:"submit",children:"\u786e\u5b9a"}),(0,j.jsx)(r.default,{className:b().close,onClick:function(){p(null),n(!1)},children:"\u53d6\u6d88"})]})})]})})})}},22877:function(e,n,t){"use strict";t.d(n,{m7:function(){return a},EQ:function(){return r},aY:function(){return s},OW:function(){return u}});var a=/^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$/,r=/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,s=/^[1-9]\d{5}(18|19|20|(3\d))\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,u=/\s/},97214:function(e){e.exports={fromBox:"addAdmin_fromBox__ohhuK",btnBox:"addAdmin_btnBox__g_KIN",submit:"addAdmin_submit__LoFwK",close:"addAdmin_close__mG8z5"}}}]);